# 求知书店网上购书平台

## 项目简介
求知书店是一个基于Java Web技术构建的B2B网上购书平台，旨在拓展书店销售渠道，实现图书在线销售全流程。平台界面美观、操作便捷、技术先进稳定，同时支持顾客购书与管理员管理功能。

## 核心定位与目标
- **核心定位**：拓展书店销售渠道，构建B2B网上购书平台
- **核心特点**：界面美观、操作便捷、技术先进稳定
- **核心目标**：实现图书在线销售全流程，支撑顾客购书与管理员（图书/用户/订单/折扣）管理功能

## 核心角色与功能

### 1. 顾客角色

#### 账号管理
- 注册：支持用户名、密码、邮箱、地址等信息注册
- 登录验证：用户名密码登录，支持记住我功能
- 注销：安全退出系统
- 个人信息修改：更新个人资料

#### 图书浏览
- 首页分页列表查看
- 图书详情：查看名称、简介、单价、已售数量等信息
- 多条件搜索：支持按名称、作者、ISBN等条件搜索

#### 购物车操作
- 添加图书到购物车
- 查看购物车详情：包含图书名称、作者、单价、数量、总计金额
- 删除购物车商品
- 修改商品数量：金额实时更新

#### 订单管理
- 购物车结账生成订单
- 查看订单详情：订单号、地址、邮编、日期、状态等
- 订单状态跟踪：待支付/待发货/待收货/待评价/已完成/待退款/已取消

#### 评论功能
- 对已购图书进行评分（1-5分）
- 发表评论内容

### 2. 管理员角色

#### 图书维护
- 新增图书：填写书名、作者、出版社、ISBN、价格、库存等信息
- 修改图书信息
- 删除图书
- 批量操作
- 分类管理

#### 用户维护
- 查看注册用户列表
- 管理用户信息与权限

#### 订单管理
- 查看全量订单列表
- 处理订单状态（确认、发货、完成等）
- 查看订单详情

#### 折扣管理
- 设置折扣规则：折扣比例、适用图书范围、有效时间
- 支持用户等级折扣机制

#### 管理员管理
- 创建新管理员账号

## 数据库设计

### 核心表结构

#### 用户表
| 字段名 | 描述 |
|--------|------|
| userId | 用户ID |
| username | 用户名 |
| password | 密码 |
| email | 邮箱 |
| address | 地址 |
| userType | 用户类型 |

#### 图书表
| 字段名 | 描述 |
|--------|------|
| bookId | 图书ID |
| ISBN | 国际标准书号 |
| bookName | 图书名称 |
| author | 作者 |
| price | 价格 |
| stockNum | 库存数量 |
| soldNum | 已售数量 |

#### 购物车表
| 字段名 | 描述 |
|--------|------|
| cartId | 购物车ID |
| userId | 用户ID |
| bookId | 图书ID |
| quantity | 数量 |
| addedTime | 添加时间 |

#### 订单表
| 字段名 | 描述 |
|--------|------|
| orderId | 订单ID |
| userId | 用户ID |
| totalAmount | 总金额 |
| deliveryAddress | 送货地址 |
| orderStatus | 订单状态 |

#### 订单项表
| 字段名 | 描述 |
|--------|------|
| itemId | 订单项ID |
| orderId | 订单ID |
| bookId | 图书ID |
| quantity | 数量 |
| price | 价格 |

#### 评论表
| 字段名 | 描述 |
|--------|------|
| commentId | 评论ID |
| userId | 用户ID |
| bookId | 图书ID |
| content | 评论内容 |
| rating | 评分 |

#### 折扣表
| 字段名 | 描述 |
|--------|------|
| discountId | 折扣ID |
| discountType | 折扣类型 |
| discountRate | 折扣比例 |
| applicableBooks | 适用图书 |
| startTime | 开始时间 |
| endTime | 结束时间 |

## 技术架构

### 技术栈
- **后端**：Java Web (MVC模式) + JSP + JavaBean + Servlet + MyBatis + Redis + MySQL
- **前端**：JSP + CSS + JavaScript

### 项目结构
```
com.bookstore/ 
├── common/             # 公共组件 
│  ├── BaseServlet.java # 基础Servlet类 
│  └── Result.java      # 统一返回结果类 
├── controller/         # 控制器层 
│  ├── admin/           # 管理员端控制器
│  └── user/            # 用户端控制器 
├── entity/             # 实体类 
├── filter/             # 过滤器 
├── mapper/             # 数据访问层 
├── service/            # 业务逻辑层 
│  └── impl/            # 服务实现 
└── tool/               # 工具类
```

### 技术特点
- **MVC架构**：清晰的分层设计，提高代码可维护性
- **Redis缓存**：提升系统性能，减少数据库压力
- **MyBatis持久层**：灵活的SQL映射，简化数据库操作
- **过滤器机制**：实现登录验证、权限控制等功能
- **响应式布局**：适配多设备访问

## 关键业务逻辑

### 订单状态流转

#### 状态定义
- 0：待付款
- 1：待发货
- 2：待收货
- 3：待评价
- 4：已完成
- 5：待退款
- 6：已取消

#### 流转流程
1. 用户点击购买（立即购买/购物车购买）→ 订单状态0（待付款），锁定库存
2. 30分钟未支付 → 状态转为6（已取消），库存回流，订单结束
3. 30分钟内支付 → 状态转为1（待发货）
4. 管理员发货操作 → 状态转为2（待收货）
5. 用户操作：
   - 申请退款 → 状态转为5（待退款），管理员确认退款 → 状态6（已取消），库存回流，订单结束
   - 确认收货 → 状态转为3（待评价），用户完成评价 → 状态4（已完成），订单结束

## 系统核心特点

1. **界面友好**
   - 简洁清晰的界面设计
   - 功能分区明确
   - 响应式布局，适配多设备访问

2. **功能完整**
   - 覆盖购书全流程与管理需求
   - 支持折扣机制
   - 完善的订单状态跟踪

3. **技术先进**
   - 采用MVC架构，代码结构清晰
   - Redis缓存提升系统性能
   - MyBatis灵活访问数据库

4. **安全可靠**
   - 完善的登录验证机制
   - 防未授权访问
   - 完善的异常处理

5. **可扩展易维护**
   - 模块化设计，便于功能扩展
   - 代码规范，提高可维护性

## 快速开始

### 环境要求
- JDK 21+
- Maven 3.6+
- MySQL 8.0+
- Redis 6.0+

### 安装步骤
1. 克隆项目：`git clone <repository-url>`
2. 配置数据库：修改 `src/main/resources/db.properties`
3. 配置Redis：修改 `src/main/resources/redis.properties`
4. 编译项目：`mvn clean compile`
5. 部署项目：将生成的war包部署到Tomcat等Web容器

### 访问地址
- 用户端：`http://localhost:8080/Bookstore/index.jsp`
- 管理员端：`http://localhost:8080/Bookstore/admin/login.jsp`

## 许可证
MIT License
